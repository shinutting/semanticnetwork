<!DOCTYPE html>
<meta charset="utf-8">

<html>
<style>
.links line{
  /*stroke: #999;*/
  stroke-opacity: 0.6;
  stroke-width: 1.5;
}

.nodes circle{
  stroke: #fff;
  stroke-width: 2.5px;
}

@import url(http://fonts.googleapis.com/css?family=Source+Code+Pro:400,600);
      body {font-family: "Source Code Pro", Consolas, monaco, monospace; line-height: 160%; font-size: 16px;  margin: 0; }
      path.link {
        fill: none;
        stroke-width: 2px;
      }
      .node:not(:hover) .nodetext {
        display: none;
      }
      h1 { font-size: 36px; margin: 10px 0; text-transform: uppercase; font-weight: normal;}
      h2, h3 { font-size: 18px; margin: 5px 0 ; font-weight: normal;}
      header {padding: 20px; position: absolute; top: 0; left: 0; background-color: rgba(255,255,255,0.9);}
      a:link { color: #EE3124; text-decoration: none;}
      a:visited { color: #EE3124; }
      a:hover { color: #A4CD39; text-decoration: underline;}
      a:active { color: #EE3124; }


</style>
<body>

	<header>

	<h1>University Info</h1>
	<h2>Click to view fees</h2>
	<h3>And show direct competitors</h3>
	
	<div class = "ui-widget">
	<input id = "search" placeholder = "Search here" >
	<button type="button" onclick="searchNode()">Find</button>
	<select name = "filter">
		<option value = "" selected>Show All</option>
		<option value = "Filter1" selected>Filter 1</option>
		<option value = "Filter2" selected>Filter 2</option>
	</select>	
	</div>

	</header>






<div id = "container" class = "svg-container">
	<svg width="2500" height="1500"></svg>
</div>

<script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type='text/javascript' src="http://code.jquery.com/ui/1.11.3/jquery-ui.min.js"> </script>
<link type="text/css" href="lib/jquery/ui-darkness/jquery-ui-1.8.21.custom.css" rel="stylesheet" />>

<script>

var baseNodes = [
	
	
	
	//Country Nodes
	{ id: "UK Universities", group: 0, label: "UK Universities", level: 1, radius: 25},
	{ id: "Malaysian Universities", group: 1, label: "Malaysian Universities", level: 1, radius: 25},
	{ id: "Singaporean Universities", group: 2, label: "Singaporean Universities", level: 1, radius: 25},
	{ id: "Hong Kong Universities", group: 3, label: "Hong Kong Universities", level: 1, radius: 25},
	{ id: "UAE Universities", group: 4, label: "UAE Universities", level: 1, radius: 25},
	{ id: "Ghanaian Universities", group: 5, label: "Ghanaian Universities", level: 1, radius: 25},
	{ id: "Indian Universities", group: 6, label: "Indian Universities", level: 1, radius: 25},
	
	//UK University Nodes
{id: "Abertay University", group: 0, label: "Abertay University", level: 2},
{id: "Aberystwyth University", group: 0, label: "Aberystwyth University", level: 2},
{id: "Anglia Ruskin University", group: 0, label: "Anglia Ruskin University", level: 2},
{id: "Arden University", group: 0, label: "Arden University", level: 2},
{id: "Bangor University", group: 0, label: "Bangor University", level: 2},
{id: "Bath Spa University", group: 0, label: "Bath Spa University", level: 2},
{id: "Birmingham City University", group: 0, label: "Birmingham City University", level: 2},
{id: "Cardiff Metropolitan University", group: 0, label: "Cardiff Metropolitan University", level: 2},
{id: "Cardiff University", group: 0, label: "Cardiff University", level: 2},
{id: "City University London", group: 0, label: "City University London", level: 2},
{id: "Coventry University", group: 0, label: "Coventry University", level: 2},
{id: "De Montfort University", group: 0, label: "De Montfort University", level: 2},
{id: "Edge Hill University", group: 0, label: "Edge Hill University", level: 2},
{id: "Edinburgh Napier University", group: 0, label: "Edinburgh Napier University", level: 2},
{id: "Wrexham Glyndwr University", group: 0, label: "Wrexham Glyndwr University", level: 2},
{id: "Goldsmiths", group: 0, label: "Goldsmiths", level: 2},
{id: "Heriot-Watt University", group: 0, label: "Heriot-Watt University", level: 2},
{id: "Kingston University", group: 0, label: "Kingston University", level: 2},
{id: "Lancaster University", group: 0, label: "Lancaster University", level: 2},
{id: "Leeds Beckett University", group: 0, label: "Leeds Beckett University", level: 2},
{id: "Liverpool John Moores University", group: 0, label: "Liverpool John Moores University", level: 2},
{id: "London Business School", group: 0, label: "London Business School", level: 2},
{id: "London School of Business and Finance", group: 0, label: "London School of Business and Finance", level: 2},
{id: "London School of Commerce", group: 0, label: "London School of Commerce", level: 2},
{id: "London School of Economics and Political Science", group: 0, label: "London School of Economics and Political Science", level: 2},
{id: "London South Bank University", group: 0, label: "London South Bank University", level: 2},
{id: "Loughborough University", group: 0, label: "Loughborough University", level: 2},
{id: "Manchester Metropolitan University", group: 0, label: "Manchester Metropolitan University", level: 2},
{id: "Middlesex University", group: 0, label: "Middlesex University", level: 2},
{id: "Northumbria University", group: 0, label: "Northumbria University", level: 2},
{id: "Nottingham Trent Unviersity", group: 0, label: "Nottingham Trent Unviersity", level: 2},
{id: "Oxford Brookes University", group: 0, label: "Oxford Brookes University", level: 2},
{id: "Pembrokeshire College", group: 0, label: "Pembrokeshire College", level: 2},
{id: "Plymouth University", group: 0, label: "Plymouth University", level: 2},
{id: "Queen Margaret University", group: 0, label: "Queen Margaret University", level: 2},
{id: "Queen's University Belfast", group: 0, label: "Queen's University Belfast", level: 2},
{id: "Royal Holloway", group: 0, label: "Royal Holloway", level: 2},
{id: "Sheffield Hallam University", group: 0, label: "Sheffield Hallam University", level: 2},
{id: "Southampton Solent University", group: 0, label: "Southampton Solent University", level: 2},
{id: "Staffordshire University", group: 0, label: "Staffordshire University", level: 2},
{id: "Teesside University", group: 0, label: "Teesside University", level: 2},
{id: "The Open University", group: 0, label: "The Open University", level: 2},
{id: "The University of Manchester", group: 0, label: "The University of Manchester", level: 2},
{id: "University College Birmingham", group: 0, label: "University College Birmingham", level: 2},
{id: "University of Bedfordshire", group: 0, label: "University of Bedfordshire", level: 2},
{id: "University of Birmingham", group: 0, label: "University of Birmingham", level: 2},
{id: "University of Bolton", group: 0, label: "University of Bolton", level: 2},
{id: "University of Bradford", group: 0, label: "University of Bradford", level: 2},
{id: "University of Cambridge International Examinations", group: 0, label: "University of Cambridge International Examinations", level: 2},
{id: "University of Central Lancashire", group: 0, label: "University of Central Lancashire", level: 2},
{id: "University of Chester", group: 0, label: "University of Chester", level: 2},
{id: "University of Derby", group: 0, label: "University of Derby", level: 2},
{id: "University of East Anglia", group: 0, label: "University of East Anglia", level: 2},
{id: "University of East London", group: 0, label: "University of East London", level: 2},
{id: "University of Edinburgh", group: 0, label: "University of Edinburgh", level: 2},
{id: "University of Essex", group: 0, label: "University of Essex", level: 2},
{id: "University of Essex Online", group: 0, label: "University of Essex Online", level: 2},
{id: "University of Exeter Online", group: 0, label: "University of Exeter Online", level: 2},
{id: "University of Glasgow", group: 0, label: "University of Glasgow", level: 2},
{id: "University of Gloucestershire", group: 0, label: "University of Gloucestershire", level: 2},
{id: "University of Greenwich", group: 0, label: "University of Greenwich", level: 2},
{id: "University of Hertfordshire", group: 0, label: "University of Hertfordshire", level: 2},
{id: "University of Huddersfield", group: 0, label: "University of Huddersfield", level: 2},
{id: "University of Hull", group: 0, label: "University of Hull", level: 2},
{id: "University of Leeds", group: 0, label: "University of Leeds", level: 2},
{id: "University of Leicester", group: 0, label: "University of Leicester", level: 2},
{id: "University of Lincoln", group: 0, label: "University of Lincoln", level: 2},
{id: "University of Liverpool", group: 0, label: "University of Liverpool", level: 2},
{id: "University of London International Programmes", group: 0, label: "University of London International Programmes", level: 2},
{id: "University of Northampton", group: 0, label: "University of Northampton", level: 2},
{id: "University of Nottingham", group: 0, label: "University of Nottingham", level: 2},
{id: "University of Portsmouth", group: 0, label: "University of Portsmouth", level: 2},
{id: "University of Reading", group: 0, label: "University of Reading", level: 2},
{id: "University of Roehampton", group: 0, label: "University of Roehampton", level: 2},
{id: "University of Salford", group: 0, label: "University of Salford", level: 2},
{id: "University of Sheffield", group: 0, label: "University of Sheffield", level: 2},
{id: "University of South Wales", group: 0, label: "University of South Wales", level: 2},
{id: "University of Stirling", group: 0, label: "University of Stirling", level: 2},
{id: "University of Strathclyde", group: 0, label: "University of Strathclyde", level: 2},
{id: "University of Sunderland", group: 0, label: "University of Sunderland", level: 2},
{id: "University of the West of England", group: 0, label: "University of the West of England", level: 2},
{id: "University of the West of Scotland", group: 0, label: "University of the West of Scotland", level: 2},
{id: "University of Wales", group: 0, label: "University of Wales", level: 2},
{id: "University of Wales Trinity Saint David", group: 0, label: "University of Wales Trinity Saint David", level: 2},
{id: "University of Warwick", group: 0, label: "University of Warwick", level: 2},
{id: "University of Wolverhampton", group: 0, label: "University of Wolverhampton", level: 2},
{id: "UWE Bristol", group: 0, label: "UWE Bristol", level: 2},
{id: "York St John University", group: 0, label: "York St John University", level: 2},
{id: "The University of York", group: 0, label: "The University of York", level: 2},
{id: "York St John University", group: 0, label: "York St John University", level: 2},
{id: "The University of York", group: 0, label: "The University of York", level: 2},






	
	//Malaysia University Nodes
{id: "Advanced Tertiary College", group: 1, label: "Advanced Tertiary College", level: 1},
{id: "ALC College City Campus", group: 1, label: "ALC College City Campus", level: 1},
{id: "ALC College Lighthouse Campus", group: 1, label: "ALC College Lighthouse Campus", level: 1},
{id: "Asia Pacific University of Technology & Innovation", group: 1, label: "Asia Pacific University of Technology & Innovation", level: 1},
{id: "Brickfields Asia College", group: 1, label: "Brickfields Asia College", level: 1},
{id: "CDC Management Development Sdn Bhd", group: 1, label: "CDC Management Development Sdn Bhd", level: 1},
{id: "Citypro Institute", group: 1, label: "Citypro Institute", level: 1},
{id: "Crescendo International College", group: 1, label: "Crescendo International College", level: 1},
{id: "Disted College", group: 1, label: "Disted College", level: 1},
{id: "First City University College", group: 1, label: "First City University College", level: 1},
{id: "FTMS Global Academy", group: 1, label: "FTMS Global Academy", level: 1},
{id: "FTMS Global College", group: 1, label: "FTMS Global College", level: 1},
{id: "HELP Academy", group: 1, label: "HELP Academy", level: 1},
{id: "HELP CAT", group: 1, label: "HELP CAT", level: 1},
{id: "HELP College of Arts & Technology", group: 1, label: "HELP College of Arts & Technology", level: 1},
{id: "HELP University", group: 1, label: "HELP University", level: 1},
{id: "Heriot Watt University Malaysia Campus", group: 1, label: "Heriot Watt University Malaysia Campus", level: 1},
{id: "INTI International College Kuala Lumpur", group: 1, label: "INTI International College Kuala Lumpur", level: 1},
{id: "INTI International College Penang", group: 1, label: "INTI International College Penang", level: 1},
{id: "INTI International College Sabah", group: 1, label: "INTI International College Sabah", level: 1},
{id: "INTI International College Subang", group: 1, label: "INTI International College Subang", level: 1},
{id: "INTI International University", group: 1, label: "INTI International University", level: 1},
{id: "KDU College", group: 1, label: "KDU College", level: 1},
{id: "KDU College Penang", group: 1, label: "KDU College Penang", level: 1},
{id: "KDU University College", group: 1, label: "KDU University College", level: 1},
{id: "Kolej PTPL Penang", group: 1, label: "Kolej PTPL Penang", level: 1},
{id: "Kolej Teknologi YPC-iTWEB", group: 1, label: "Kolej Teknologi YPC-iTWEB", level: 1},
{id: "KTG Education Group", group: 1, label: "KTG Education Group", level: 1},
{id: "MAHSA University College", group: 1, label: "MAHSA University College", level: 1},
{id: "Malvern International Academy", group: 1, label: "Malvern International Academy", level: 1},
{id: "MDIS Malaysia Campus", group: 1, label: "MDIS Malaysia Campus", level: 1},
{id: "Olympia College", group: 1, label: "Olympia College", level: 1},
{id: "SEGi College Kuala Lumpur", group: 1, label: "SEGi College Kuala Lumpur", level: 1},
{id: "SEGi College Penang", group: 1, label: "SEGi College Penang", level: 1},
{id: "SEGi College Sarawak", group: 1, label: "SEGi College Sarawak", level: 1},
{id: "SEGi College Subang Jaya", group: 1, label: "SEGi College Subang Jaya", level: 1},
{id: "SEGi University Kota Damansara", group: 1, label: "SEGi University Kota Damansara", level: 1},
{id: "Seti Stamford College", group: 1, label: "Seti Stamford College", level: 1},
{id: "Stamford College Petaling Jaya", group: 1, label: "Stamford College Petaling Jaya", level: 1},
{id: "Sunway University", group: 1, label: "Sunway University", level: 1},
{id: "Taylor's University", group: 1, label: "Taylor's University", level: 1},
{id: "UCSI University", group: 1, label: "UCSI University", level: 1},
{id: "University of Nottingham Malaysia Campus", group: 1, label: "University of Nottingham Malaysia Campus", level: 1},
{id: "University of Reading Malaysia", group: 1, label: "University of Reading Malaysia", level: 1},

	
	//Singapore University Nodes
{id: "AEC College", group: 2, label: "AEC College", level: 1},
{id: "Amity Global Business School", group: 2, label: "Amity Global Business School", level: 1},
{id: "Ascensia Academy", group: 2, label: "Ascensia Academy", level: 1},
{id: "Auston Institute of Management", group: 2, label: "Auston Institute of Management", level: 1},
{id: "Aventis School of Management", group: 2, label: "Aventis School of Management", level: 1},
{id: "BMC International College", group: 2, label: "BMC International College", level: 1},
{id: "Dimensions International College", group: 2, label: "Dimensions International College", level: 1},
{id: "East Asia Institute of Management", group: 2, label: "East Asia Institute of Management", level: 1},
{id: "ERC Institute", group: 2, label: "ERC Institute", level: 1},
{id: "FTMS Global Academy", group: 2, label: "FTMS Global Academy", level: 1},
{id: "FY Institute of Technology", group: 2, label: "FY Institute of Technology", level: 1},
{id: "Genetic Computer School", group: 2, label: "Genetic Computer School", level: 1},
{id: "Informatics Academy", group: 2, label: "Informatics Academy", level: 1},
{id: "Informatics Global Campus", group: 2, label: "Informatics Global Campus", level: 1},
{id: "ITC School of Laws", group: 2, label: "ITC School of Laws", level: 1},
{id: "Lithan Academy", group: 2, label: "Lithan Academy", level: 1},
{id: "Management Development Institute of Singapore", group: 2, label: "Management Development Institute of Singapore", level: 1},
{id: "Nanyang Institute of Management", group: 2, label: "Nanyang Institute of Management", level: 1},
{id: "PSB Academy", group: 2, label: "PSB Academy", level: 1},
{id: "SAA Global Education", group: 2, label: "SAA Global Education", level: 1},
{id: "SAA Global Education Centre", group: 2, label: "SAA Global Education Centre", level: 1},
{id: "Seri Stamford College", group: 2, label: "Seti Stamford College", level: 1},
{id: "Shelton College International", group: 2, label: "Shelton College International", level: 1},
{id: "Singapore Institute of Technology", group: 2, label: "Singapore Institute of Technology", level: 1},
{id: "SSTC Institute", group: 2, label: "SSTC Institute", level: 1},
{id: "Stansfield", group: 2, label: "Stansfield", level: 1},
{id: "TEG International College", group: 2, label: "TEG International College", level: 1},
{id: "The Open University online", group: 2, label: "The Open University online", level: 1},
{id: "The Retail Academy of Singapore", group: 2, label: "The Retail Academy of Singapore", level: 1},
{id: "The University of York Online", group: 2, label: "The University of York Online", level: 1},
{id: "TMC Academy", group: 2, label: "TMC Academy", level: 1},
{id: "Training Vision Institute", group: 2, label: "Training Vision Institute", level: 1},
{id: "YMCA Education Centre", group: 2, label: "YMCA Education Centre", level: 1},

	
	//Hong Kong University Nodes
{id: "ABRS Management and Technology Institute", group: 3, label: "ABRS Management and Technology Institute", level: 1},
{id: "Ana Omega Consulting Ltd", group: 3, label: "Ana Omega Consulting Ltd", level: 1},
{id: "Aston Institute", group: 3, label: "Aston Institute", level: 1},
{id: "Centre for Educational Development", group: 3, label: "Centre for Educational Development", level: 1},
{id: "Centre of Educational Development", group: 3, label: "Centre of Educational Development", level: 1},
{id: "Compass College", group: 3, label: "Compass College", level: 1},
{id: "East Asia School of Business Limited", group: 3, label: "East Asia School of Business Limited", level: 1},
{id: "Henley Business School", group: 3, label: "Henley Business School", level: 1},
{id: "HK College of Technology", group: 3, label: "HK College of Technology", level: 1},
{id: "HK Institute of Continuing Higher Education", group: 3, label: "HK Institute of Continuing Higher Education", level: 1},
{id: "HK Institute of Technology", group: 3, label: "HK Institute of Technology", level: 1},
{id: "HK Management Association", group: 3, label: "HK Management Association", level: 1},
{id: "HK Polytechnic University - SPEED", group: 3, label: "HK Polytechnic University - SPEED", level: 1},
{id: "HK School of Commerce", group: 3, label: "HK School of Commerce", level: 1},
{id: "HK Shue Yan University", group: 3, label: "HK Shue Yan University", level: 1},
{id: "HK SPEED", group: 3, label: "HK SPEED", level: 1},
{id: "HKU SPACE", group: 3, label: "HKU SPACE", level: 1},
{id: "International Academy of Management", group: 3, label: "International Academy of Management", level: 1},
{id: "IPEM", group: 3, label: "IPEM", level: 1},
{id: "Kaplan", group: 3, label: "Kaplan", level: 1},
{id: "Kaplan Higher Education", group: 3, label: "Kaplan Higher Education", level: 1},
{id: "Lingnan University", group: 3, label: "Lingnan University", level: 1},
{id: "Manchester Business School", group: 3, label: "Manchester Business School", level: 1},
{id: "Middlesex University Business School HK", group: 3, label: "Middlesex University Business School HK", level: 1},
{id: "Open University of HK", group: 3, label: "Open University of HK", level: 1},
{id: "RDI Management Learning Ltd", group: 3, label: "RDI Management Learning Ltd", level: 1},
{id: "SCOPE", group: 3, label: "SCOPE", level: 1},
{id: "SHAPE", group: 3, label: "SHAPE", level: 1},
{id: "SIM Global Education", group: 3, label: "SIM Global Education", level: 1},
{id: "SPEED", group: 3, label: "SPEED", level: 1},
{id: "Sun Wah - Pearl Linux and Digital Forensics Ltd", group: 3, label: "Sun Wah - Pearl Linux and Digital Forensics Ltd", level: 1},
{id: "Unisoft Education Centre", group: 3, label: "Unisoft Education Centre", level: 1},
{id: "University of HK - HKU SPACE", group: 3, label: "University of HK - HKU SPACE", level: 1},
{id: "University of Sunderland Hong Kong campus", group: 3, label: "University of Sunderland Hong Kong campus", level: 1},
{id: "University of Warwick (HK Office)", group: 3, label: "University of Warwick (HK Office)", level: 1},



	
	//UAE University Nodes
{id: "Cass Business School Dubai", group: 4, label: "Cass Business School Dubai", level: 1},
{id: "Dubai Knowledge Centre", group: 4, label: "Dubai Knowledge Centre", level: 1},
{id: "Emirates Aviation University", group: 4, label: "Emirates Aviation University", level: 1},
{id: "Heriot Watt University Dubai Campus", group: 4, label: "Heriot Watt University Dubai Campus", level: 1},
{id: "Higher Colleges of Technology and the Centre of Excellence for Applied Research and Training", group: 4, label: "Higher Colleges of Technology and the Centre of Excellence for Applied Research and Training", level: 1},
{id: "London Business School Dubai Campus", group: 4, label: "London Business School Dubai Campus", level: 1},
{id: "Manchester Business School", group: 4, label: "Manchester Business School", level: 1},
{id: "Middlesex University Dubai", group: 4, label: "Middlesex University Dubai", level: 1},
{id: "Western International College FZE Ras Al Khaimah", group: 4, label: "Western International College FZE Ras Al Khaimah", level: 1},

	
	//Ghana University Nodes
{id: "Ghana Technology University College", group: 5, label: "Ghana Technology University College", level: 1},
{id: "Lancaster University Ghana", group: 5, label: "Lancaster University Ghana", level: 1},



	//India University Nodes
{id: "Amity Global Business School", group: 6, label: "Amity Global Business School", level: 1},
{id: "Daly College Business School", group: 6, label: "Daly College Business School", level: 1},
{id: "G D Goenska World Institute", group: 6, label: "G D Goenska World Institute", level: 1},


	
	
	
]

var baseLinks =[

	//Degree baseNode-to-Degree Country Node

	
	//UK University-to- Malaysia Partner
{target: "Abertay University", source: "SEGi University Kota Damansara", strength: 0.1},
{target: "Aberystwyth University", source: "Brickfields Asia College", strength: 0.1},
{target: "Aberystwyth University", source: "HELP University", strength: 0.1},
{target: "Anglia Ruskin University", source: "FTMS Global Academy", strength: 0.1},
{target: "Anglia Ruskin University", source: "First City University College", strength: 0.1},
{target: "Anglia Ruskin University", source: "HELP University", strength: 0.1},
{target: "Anglia Ruskin University", source: "MAHSA University College", strength: 0.1},
{target: "Anglia Ruskin University", source: "Kolej PTPL Penang", strength: 0.1},
{target: "Birmingham City University", source: "Brickfields Asia College", strength: 0.1},
{target: "UWE Bristol", source: "Taylor's University", strength: 0.1},
{target: "UWE Bristol", source: "UCSI University", strength: 0.1},
{target: "UWE Bristol", source: "Olympia College", strength: 0.1},
{target: "Cardiff University", source: "Brickfields Asia College", strength: 0.1},
{target: "Cardiff University", source: "HELP University", strength: 0.1},
{target: "Cardiff University", source: "Taylor's University", strength: 0.1},
{target: "University of Chester", source: "KDU College", strength: 0.1},
{target: "Coventry University", source: "INTI International University", strength: 0.1},
{target: "De Montfort University", source: "Brickfields Asia College", strength: 0.1},
{target: "University of Derby", source: "HELP University", strength: 0.1},
{target: "University of East Anglia", source: "Brickfields Asia College", strength: 0.1},
{target: "University of East London", source: "FTMS Global Academy", strength: 0.1},
{target: "University of Essex", source: "Brickfields Asia College", strength: 0.1},
{target: "University of Essex", source: "HELP University", strength: 0.1},
{target: "University of Essex", source: "INTI International University", strength: 0.1},
{target: "University of Essex", source: "KDU College", strength: 0.1},
{target: "University of Gloucestershire", source: "ALC College City Campus", strength: 0.1},
{target: "University of Gloucestershire", source: "ALC College Lighthouse Campus", strength: 0.1},
{target: "Wrexham Glyndwr University", source: "Brickfields Asia College", strength: 0.1},
{target: "University of Greenwich", source: "SEGi College Kuala Lumpur", strength: 0.1},
{target: "University of Greenwich", source: "SEGi College Penang", strength: 0.1},
{target: "University of Greenwich", source: "SEGi College Subang Jaya", strength: 0.1},
{target: "Heriot-Watt University", source: "Heriot Watt University Malaysia Campus", strength: 0.1},
{target: "University of Hertfordshire", source: "Brickfields Asia College", strength: 0.1},
{target: "University of Hertfordshire", source: "HELP University", strength: 0.1},
{target: "University of Hertfordshire", source: "INTI International College Sabah", strength: 0.1},
{target: "University of Hertfordshire", source: "INTI International College Kuala Lumpur", strength: 0.1},
{target: "University of Hertfordshire", source: "INTI International College Subang", strength: 0.1},
{target: "University of Hertfordshire", source: "INTI International College Penang", strength: 0.1},
{target: "University of Hull", source: "Brickfields Asia College", strength: 0.1},
{target: "Kingston University", source: "Brickfields Asia College", strength: 0.1},
{target: "University of Central Lancashire", source: "Brickfields Asia College", strength: 0.1},
{target: "Lancaster University", source: "Sunway University", strength: 0.1},
{target: "Leeds Beckett University", source: "FTMS Global Academy", strength: 0.1},
{target: "Leeds Beckett University", source: "KTG Education Group", strength: 0.1},
{target: "Leeds Beckett University", source: "Stamford College Petaling Jaya", strength: 0.1},
{target: "University of Leeds", source: "HELP University", strength: 0.1},
{target: "University of Leeds", source: "Taylor's University", strength: 0.1},
{target: "University of Lincoln", source: "KDU College", strength: 0.1},
{target: "Liverpool John Moores University", source: "Kolej Teknologi YPC-iTWEB", strength: 0.1},
{target: "University of Liverpool", source: "Brickfields Asia College", strength: 0.1},
{target: "University of Liverpool", source: "HELP University", strength: 0.1},
{target: "University of Liverpool", source: "Taylor's University", strength: 0.1},
{target: "University of London International Programmes", source: "Advanced Tertiary College", strength: 0.1},
{target: "University of London International Programmes", source: "Brickfields Asia College", strength: 0.1},
{target: "University of London International Programmes", source: "HELP University", strength: 0.1},
{target: "University of London International Programmes", source: "KDU College", strength: 0.1},
{target: "University of London International Programmes", source: "Crescendo International College", strength: 0.1},
{target: "University of London International Programmes", source: "Kolej PTPL Penang", strength: 0.1},
{target: "University of London International Programmes", source: "SEGi College Sarawak", strength: 0.1},
{target: "University of London International Programmes", source: "Seri Stamford College", strength: 0.1},
{target: "The University of Manchester", source: "HELP University", strength: 0.1},
{target: "The University of Manchester", source: "Taylor's University", strength: 0.1},
{target: "The University of Manchester", source: "Brickfields Asia College", strength: 0.1},
{target: "Middlesex University", source: "UCSI University", strength: 0.1},
{target: "Northumbria University", source: "Brickfields Asia College", strength: 0.1},
{target: "Northumbria University", source: "HELP University", strength: 0.1},
{target: "Northumbria University", source: "KDU College", strength: 0.1},
{target: "Northumbria University", source: "Kolej PTPL Penang", strength: 0.1},
{target: "Northumbria University", source: "UCSI University", strength: 0.1},
{target: "University of Northampton", source: "UCSI University", strength: 0.1},
{target: "Nottingham Trent Unviersity", source: "Brickfields Asia College", strength: 0.1},
{target: "University of Nottingham", source: "University of Nottingham Malaysia Campus", strength: 0.1},
{target: "Oxford Brookes University", source: "Brickfields Asia College", strength: 0.1},
{target: "Oxford Brookes University", source: "Citypro Institute", strength: 0.1},
{target: "Pembrokeshire College", source: "Brickfields Asia College", strength: 0.1},
{target: "Queen's University Belfast", source: "Brickfields Asia College", strength: 0.1},
{target: "University of Reading", source: "Brickfields Asia College", strength: 0.1},
{target: "University of Reading", source: "University of Reading Malaysia", strength: 0.1},
{target: "University of Reading", source: "Taylor's University", strength: 0.1},
{target: "University of Sheffield", source: "HELP University", strength: 0.1},
{target: "University of Sheffield", source: "Taylor's University", strength: 0.1},
{target: "Southampton Solent University", source: "Brickfields Asia College", strength: 0.1},
{target: "University of South Wales", source: "Brickfields Asia College", strength: 0.1},
{target: "Staffordshire University", source: "Asia Pacific University of Technology & Innovation", strength: 0.1},
{target: "Staffordshire University", source: "Disted College", strength: 0.1},
{target: "University of Strathclyde", source: "CDC Management Development Sdn Bhd", strength: 0.1},
{target: "University of Sunderland", source: "SEGi College Penang", strength: 0.1},
{target: "University of Sunderland", source: "SEGi College Sarawak", strength: 0.1},
{target: "University of Sunderland", source: "SEGi College Subang Jaya", strength: 0.1},
{target: "University of Sunderland", source: "SEGi University Kota Damansara", strength: 0.1},
{target: "University of Wales", source: "Malvern International Academy", strength: 0.1},
{target: "University of the West of England", source: "Taylor's University", strength: 0.1},
{target: "University of Wolverhampton", source: "MDIS Malaysia Campus", strength: 0.1},



	//UK University-to-Singapore Partner
{target: "Anglia Ruskin University", source: "Amity Global Business School", strength: 0.1},
{target: "Anglia Ruskin University", source: "FTMS Global Academy", strength: 0.1},
{target: "Bangor University", source: "Management Development Institute of Singapore", strength: 0.1},
{target: "Bath Spa University", source: "Training Vision Institute", strength: 0.1},
{target: "University of Bedfordshire", source: "Kaplan Higher Education", strength: 0.1},
{target: "University of Birmingham", source: "SIM Global Education", strength: 0.1},
{target: "Birmingham City University", source: "AEC College", strength: 0.1},
{target: "Birmingham City University", source: "Auston Institute of Management", strength: 0.1},
{target: "Birmingham City University", source: "Kaplan Higher Education", strength: 0.1},
{target: "University of Cambridge International Examinations", source: "BMC International College", strength: 0.1},
{target: "Cardiff Metropolitan University", source: "East Asia Institute of Management", strength: 0.1},
{target: "Cardiff Metropolitan University", source: "Dimensions International College", strength: 0.1},
{target: "University of Chester", source: "Dimensions International College", strength: 0.1},
{target: "Coventry University", source: "PSB Academy", strength: 0.1},
{target: "De Montfort University", source: "Lithan Academy", strength: 0.1},
{target: "University of Derby", source: "Aventis School of Management", strength: 0.1},
{target: "University of East London", source: "FTMS Global Academy", strength: 0.1},
{target: "Edge Hill University", source: "FY Institute of Technology", strength: 0.1},
{target: "Edge Hill University", source: "Shelton College International", strength: 0.1},
{target: "Edinburgh Napier University", source: "PSB Academy", strength: 0.1},
{target: "University of Essex", source: "Kaplan Higher Education", strength: 0.1},
{target: "University of Glasgow", source: "Singapore Institute of Technology", strength: 0.1},
{target: "University of Gloucestershire", source: "TMC Academy", strength: 0.1},
{target: "University of Greenwich", source: "ERC Institute", strength: 0.1},
{target: "University of Greenwich", source: "TMC Academy", strength: 0.1},
{target: "Heriot-Watt University", source: "Ascensia Academy", strength: 0.1},
{target: "Heriot-Watt University", source: "East Asia Institute of Management", strength: 0.1},
{target: "University of Hertfordshire", source: "BMC International College", strength: 0.1},
{target: "University of Hertfordshire", source: "Dimensions International College", strength: 0.1},
{target: "University of Hull", source: "PSB Academy", strength: 0.1},
{target: "Kingston University", source: "Aventis School of Management", strength: 0.1},
{target: "University of London International Programmes", source: "Genetic Computer School", strength: 0.1},
{target: "University of London International Programmes", source: "ITC School of Laws", strength: 0.1},
{target: "University of London International Programmes", source: "PSB Academy", strength: 0.1},
{target: "University of London International Programmes", source: "SAA Global Education", strength: 0.1},
{target: "University of London International Programmes", source: "Stansfield", strength: 0.1},
{target: "University of London International Programmes", source: "TMC Academy", strength: 0.1},
{target: "Goldsmiths", source: "Seri Stamford College", strength: 0.1},
{target: "London School of Economics and Political Science", source: "SIM Global Education", strength: 0.1},
{target: "Royal Holloway", source: "Kaplan Higher Education", strength: 0.1},
{target: "London School of Business and Finance", source: "London School of Business and Finance", strength: 0.1},
{target: "London South Bank University", source: "Auston Institute of Management", strength: 0.1},
{target: "Loughborough University", source: "PSB Academy", strength: 0.1},
{target: "The University of Manchester", source: "Manchester Business School", strength: 0.1},
{target: "The University of Manchester", source: "SIM Global Education", strength: 0.1},
{target: "Northumbria University", source: "Kaplan Higher Education", strength: 0.1},
{target: "Northumbria University", source: "Management Development Institute of Singapore", strength: 0.1},
{target: "University of Northampton", source: "Amity Global Business School", strength: 0.1},
{target: "University of Northampton", source: "TMC Academy", strength: 0.1},
{target: "University of Nottingham", source: "PSB Academy", strength: 0.1},
{target: "The Open University", source: "The Open University online", strength: 0.1},
{target: "Oxford Brookes University", source: "Informatics Academy", strength: 0.1},
{target: "Plymouth University", source: "SAA Global Education Centre", strength: 0.1},
{target: "University of Portsmouth", source: "Informatics Global Campus", strength: 0.1},
{target: "University of Portsmouth", source: "Kaplan Higher Education", strength: 0.1},
{target: "Queen Margaret University", source: "East Asia Institute of Management", strength: 0.1},
{target: "University of Roehampton", source: "Aventis School of Management", strength: 0.1},
{target: "University of Salford", source: "SSTC Institute", strength: 0.1},
{target: "University of Sheffield", source: "SIM Global Education", strength: 0.1},
{target: "Sheffield Hallam University", source: "East Asia Institute of Management", strength: 0.1},
{target: "Staffordshire University", source: "Shelton College International", strength: 0.1},
{target: "University of Stirling", source: "The Retail Academy of Singapore", strength: 0.1},
{target: "University of Strathclyde", source: "YMCA Education Centre", strength: 0.1},
{target: "University of Sunderland", source: "Management Development Institute of Singapore", strength: 0.1},
{target: "Teesside University", source: "Management Development Institute of Singapore", strength: 0.1},
{target: "University of the West of Scotland", source: "Nanyang Institute of Management", strength: 0.1},
{target: "University of Wolverhampton", source: "Auston Institute of Management", strength: 0.1},
{target: "University of Wolverhampton", source: "ERC Institute", strength: 0.1},
{target: "The University of York", source: "The University of York Online", strength: 0.1},
{target: "York St John University", source: "TEG International College", strength: 0.1},



	//UK University-to-Hong Kong Partner
{target: "Arden University", source: "RDI Management Learning Ltd", strength: 0.1},
{target: "University of Bedfordshire", source: "Kaplan Higher Education", strength: 0.1},
{target: "Birmingham City University", source: "Kaplan Higher Education", strength: 0.1},
{target: "University College Birmingham", source: "Aston Institute", strength: 0.1},
{target: "University of Bolton", source: "Centre for Educational Development", strength: 0.1},
{target: "University of Bradford", source: "RDI Management Learning Ltd", strength: 0.1},
{target: "UWE Bristol", source: "SHAPE", strength: 0.1},
{target: "Coventry University", source: "SCOPE", strength: 0.1},
{target: "Coventry University", source: "SHAPE", strength: 0.1},
{target: "De Montfort University", source: "SCOPE", strength: 0.1},
{target: "University of Derby", source: "RDI Management Learning Ltd", strength: 0.1},
{target: "University of East London", source: "Compass College", strength: 0.1},
{target: "Edinburgh Napier University", source: "SCOPE", strength: 0.1},
{target: "Edinburgh Napier University", source: "HKU SPACE", strength: 0.1},
{target: "University of South Wales", source: "HK Shue Yan University", strength: 0.1},
{target: "University of South Wales", source: "Sun Wah - Pearl Linux and Digital Forensics Ltd", strength: 0.1},
{target: "University of Gloucestershire", source: "HK Institute of Continuing Higher Education", strength: 0.1},
{target: "Wrexham Glyndwr University", source: "HK Management Association", strength: 0.1},
{target: "University of Greenwich", source: "ABRS Management and Technology Institute", strength: 0.1},
{target: "University of Greenwich", source: "HK Management Association", strength: 0.1},
{target: "University of Greenwich", source: "Unisoft Education Centre", strength: 0.1},
{target: "Heriot-Watt University", source: "HK SPEED", strength: 0.1},
{target: "Heriot-Watt University", source: "HKU SPACE", strength: 0.1},
{target: "University of Huddersfield", source: "HK Management Association", strength: 0.1},
{target: "University of Hull", source: "HKU SPACE", strength: 0.1},
{target: "University of Hull", source: "Kaplan Higher Education", strength: 0.1},
{target: "University of Central Lancashire", source: "SCOPE", strength: 0.1},
{target: "University of Central Lancashire", source: "HK College of Technology", strength: 0.1},
{target: "Leeds Beckett University", source: "HK College of Technology", strength: 0.1},
{target: "Leeds Beckett University", source: "SHAPE", strength: 0.1},
{target: "University of Leicester", source: "HKU SPACE", strength: 0.1},
{target: "University of London International Programmes", source: "HK SPEED", strength: 0.1},
{target: "University of London International Programmes", source: "HKU SPACE", strength: 0.1},
{target: "Goldsmiths", source: "SIM Global Education", strength: 0.1},
{target: "London School of Economics and Political Science", source: "HKU SPACE", strength: 0.1},
{target: "Royal Holloway", source: "HKU SPACE", strength: 0.1},
{target: "London School of Commerce", source: "Centre for Educational Development", strength: 0.1},
{target: "Manchester Metropolitan University", source: "HKU SPACE", strength: 0.1},
{target: "The University of Manchester", source: "Manchester Business School", strength: 0.1},
{target: "Middlesex University", source: "HKU SPACE", strength: 0.1},
{target: "Middlesex University", source: "East Asia School of Business Limited", strength: 0.1},
{target: "Middlesex University", source: "Lingnan University", strength: 0.1},
{target: "Middlesex University", source: "HK Management Association", strength: 0.1},
{target: "Middlesex University", source: "Middlesex University Business School HK", strength: 0.1},
{target: "Northumbria University", source: "Ana Omega Consulting Ltd", strength: 0.1},
{target: "Northumbria University", source: "HK SPEED", strength: 0.1},
{target: "Northumbria University", source: "SHAPE", strength: 0.1},
{target: "University of Northampton", source: "HK Institute of Continuing Higher Education", strength: 0.1},
{target: "University of Northampton", source: "HK School of Commerce", strength: 0.1},
{target: "Nottingham Trent Unviersity", source: "Open University of HK", strength: 0.1},
{target: "Oxford Brookes University", source: "SCOPE", strength: 0.1},
{target: "Plymouth University", source: "HKU SPACE", strength: 0.1},
{target: "University of Reading", source: "Henley Business School", strength: 0.1},
{target: "Sheffield Hallam University", source: "SHAPE", strength: 0.1},
{target: "Staffordshire University", source: "SCOPE", strength: 0.1},
{target: "University of Stirling", source: "HK Shue Yan University", strength: 0.1},
{target: "University of Strathclyde", source: "IPEM", strength: 0.1},
{target: "University of Sunderland", source: "University of Sunderland Hong Kong campus", strength: 0.1},
{target: "University of Sunderland", source: "RDI Management Learning Ltd", strength: 0.1},
{target: "Teesside University", source: "HK Institute of Technology", strength: 0.1},
{target: "University of Wales", source: "HK SPEED", strength: 0.1},
{target: "University of Wales", source: "RDI Management Learning Ltd", strength: 0.1},
{target: "University of Wales", source: "Lingnan University", strength: 0.1},
{target: "University of Wales", source: "HK Management Association", strength: 0.1},
{target: "University of Wales Trinity Saint David", source: "HK Management Association", strength: 0.1},
{target: "University of South Wales", source: "International Academy of Management", strength: 0.1},
{target: "University of Warwick", source: "University of Warwick (HK Office)", strength: 0.1},
{target: "University of the West of England", source: "SHAPE", strength: 0.1},
{target: "University of Wolverhampton", source: "SCOPE", strength: 0.1},




	//UK University-to-UAE Partner
{target: "University of Bolton", source: "Western International College FZE Ras Al Khaimah", strength: 0.1},
{target: "University of Bradford", source: "Dubai Knowledge Centre", strength: 0.1},
{target: "City University London", source: "Cass Business School Dubai", strength: 0.1},
{target: "Coventry University", source: "Emirates Aviation University", strength: 0.1},
{target: "Heriot-Watt University", source: "Heriot Watt University Dubai Campus", strength: 0.1},
{target: "London Business School", source: "London Business School Dubai Campus", strength: 0.1},
{target: "The University of Manchester", source: "Manchester Business School", strength: 0.1},
{target: "Middlesex University", source: "Middlesex University Dubai", strength: 0.1},
{target: "University of Strathclyde", source: "Higher Colleges of Technology and the Centre of Excellence for Applied Research and Training", strength: 0.1},


	//Ghana and India
{target: "Coventry University", source: "Ghana Technology University College", strength: 0.1},
{target: "Lancaster University", source: "Lancaster University Ghana", strength: 0.1},
{target: "Anglia Ruskin University", source: "Amity Global Business School", strength: 0.1},
{target: "De Montfort University", source: "Daly College Business School", strength: 0.1},
{target: "Lancaster University", source: "G D Goenska World Institute", strength: 0.1},


]	






//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


	
//Neigbour Identifier	
var nodes = [...baseNodes]
var links = [...baseLinks]




function getNeighbors(node) {
console.log("node is " + node)
	
  return links.reduce(function (neighbors, link) {
      

	if (link.target.id === node.id) {
        neighbors.push(link.source.id) 
				
	for (x in links) {
		
		
		if (link.source.id === links[x].source.id){ 
			neighbors.push(links[x].target.id) 
			
		 }
		else if (link.source.id === links[x].target.id){
			neighbors.push(links[x].source.id)		 
	
		 }		

	
	
       }
       } else if (link.source.id === node.id) {
         neighbors.push(link.target.id)
	
	for (x in links){

		
		if (link.target.id === links[x].target.id){		
			neighbors.push(links[x].source.id)
							
		}
		else if (link.target.id === links[x].source.id){
			neighbors.push(links[x].target.id)

		}

        }
      }
	
      return neighbors
      
    },
    [node.id]
  )
}



function isNeighborLink(node, link) {
  return link.target.id === node.id || link.source.id === node.id
}


//Neighbour colour
function getNodeColor(node, neighbors) {
  if (Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1) {
    

	if (node.radius === 12) {
	  return 'rgba(0, 153, 255,1.0)'//SPECIFIC TO PARTNER DEGREE NODES
	}
	else if (node.group === 0) {
	  return 'rgba(255,0,0,1.0)'//'red'
	}
	else if (node.group === 1) {
	  return 'rgba(51,51,255,1.0)'//'blue'
	}
	else if (node.group === 2) {
	  return 'rgba(255,153,51,1.0)'//'orange'
	}
	else if (node.group === 3) {
	  return 'rgba(153,0,153,1.0)'//'purple'
	}
	else if (node.group === 4) {
	  return 'rgba(0,0,153,1.0)'//'MidnightBlue'
	}
	else if (node.group === 5) {
	  return 'rgba(0,204,153,1.0)'//'LightGreen'
	}
	else if (node.group === 6) {
	  return 'rgba(255,102,255,1.0)'//'RebeccaPurple'
	}
	else if (node.group === 7) {
	  return 'rgba(204,0,102,1.0)'//SPECIFIC TO UK DEGREE NODE
	}
	else {
	  return 'rgba(102,153,153,1.0)'//'void'
	}
  }
  //determines 'resting' color
  if (node.group === 0) {
	  return 'rgba(255,0,0,0.4)'//'red'
	}
	else if (node.radius === 12) {
	  return 'rgba(0,153,51,0.4)'//SPECIFIC TO DEGREE NODES
	}
	else if (node.group === 1) {
	  return 'rgba(51,51,255,0.4)'//'blue'
	}
	else if (node.group === 2) {
	  return 'rgba(255,153,51,0.4)'//'orange'
	}
	else if (node.group === 3) {
	  return 'rgba(153,0,153,0.4)'//'purple'
	}
	else if (node.group === 4) {
	  return 'rgba(0,0,153,0.4)'//'MidnightBlue'
	}
	else if (node.group === 5) {
	  return 'rgba(0,204,153,0.4)'//'LightGreen'
	}
	else if (node.group === 6) {
	  return 'rgba(255,102,255,0.4)'//'RebeccaPurple'
	}
	else if (node.group === 7) {
	  return 'rgba(204,0,102,0.4)'//SPECIFIC TO UK DEGREE NODE
	}
	else {
	  return 'rgba(102,153,153,0.4)'//'void'
	}
}
function getLinkColor(node, link) {
  return isNeighborLink(node, link) ? 'green' : 'rgba(150,150,150,0.6)'
}
//Text color, change this to make text white
function getTextColor(node, neighbors) {
  return Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1 ? 'green' : 'black' //'white'
}



//Parameters
var width = window.innerWidth;
//var width = 1800;
//var height = window.innerHeight;
var height = 835;
var radius = 6;


//SVG Container
var svg = d3.select('svg')
svg.attr('width', width).attr('height', height).style("background-color","#fff");//#e6f2ff
var linkElements,
  nodeElements,
  textElements

svg.append("rect")
  .attr("width", width)
  .attr("height", height)
  .style("fill", "none")//"none" - change to black
  .style("pointer-events","all")
  .call(d3.zoom()
    .scaleExtent([1/2,2])
	.on("zoom", zoomed));


var g = svg.append("g")

function zoomed() {
  g.attr("transform",d3.event.transform);
}  
  
  
// we use svg groups to logically group the elements together
var linkGroup = g.append('g').attr('class', 'links')
var nodeGroup = g.append('g').attr('class', 'nodes')
var textGroup = g.append('g').attr('class', 'texts')
// we use this reference to select/deselect
// after clicking the same element twice
var selectedId


// simulation setup with all forces
var linkForce = d3
  .forceLink()
  .id(function (link) { return link.id })
  .distance(200)
  .strength(function (link) { return link.strength })

var simulation = d3.forceSimulation()
  .force('link', linkForce)
  .force('charge', d3.forceManyBody().strength(-160))
  .force('center', d3.forceCenter(width / 2, height / 2))
  .force("x", d3.forceX(function(d){
	if(d.group === 0){
		return width/2
	}
	else if (d.group === 1) {
		return 3*width/4
	}
	else if (d.group === 2){
		return 3*width/4
	}
	else if (d.group === 3){
		return width/4
	}
	else if (d.group === 4){
		return width/4
	}
	else if (d.group === 5){
		return width/2
	}
	else if (d.group === 6){
		return width/2
	}
	else {
		return width/2
	}
  
  }).strength(0.1))
  
  .force("y", d3.forceY(function(d) {
  
	if(d.group === 0){
		return height/2
	}
	else if (d.group === 1) {
		return 1*height/4
	}
	else if (d.group === 2){
		return 3*height/4
	}
	else if (d.group === 3){
		return 1*height/4
	}
	else if (d.group === 4){
		return 3*height/4
	}
	else if (d.group === 5){
		return 1*height/4
	}
	else if (d.group === 6){
		return 3*height/4
	}
	else {
		return height/2
	}
  
  }).strength(0.1))
  
 //drag and drop
var dragDrop = d3.drag().on('start', function (node) {
  node.fx = node.x
  node.fy = node.y
}).on('drag', function (node) {
  simulation.alphaTarget(0.7).restart()
  node.fx = d3.event.x
  node.fy = d3.event.y
}).on('end', function (node) {
  if (!d3.event.active) {
    simulation.alphaTarget(0)
  }
  node.fx = null
  node.fy = null
})


//Selection
// select node is called on every click
// we either update the data according to the selection
// or reset the data if the same node is clicked twice
function selectNode(selectedNode) {

  //Changes h1 tag to University ID
  d3.select("h1").html(selectedNode.id); //<--------------------------------------------------------------------- ADD h2 and h3 tag changes
  d3.select("h2").html("Test");
  if (selectedId === selectedNode.id) {
    selectedId = undefined
    resetData()
    updateSimulation()
  } else {
    resetData()
    selectedId = selectedNode.id
    updateData(selectedNode)
    updateSimulation()
  }
  var neighbors = getNeighbors(selectedNode)
  // we modify the styles to highlight selected nodes
  nodeElements.attr('fill', function (node) { return getNodeColor(node, neighbors) })
  textElements.attr('fill', function (node) { return getTextColor(node, neighbors) })
  linkElements.attr('stroke', function (link) { return getLinkColor(selectedNode, link) })
}

//Reset
// this helper simply adds all nodes and links
// that are missing, to recreate the initial state
function resetData() {
  var nodeIds = nodes.map(function (node) { return node.id })
  baseNodes.forEach(function (node) {
    if (nodeIds.indexOf(node.id) === -1) {
      nodes.push(node)
    }
  })
  links = baseLinks
}


//--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// diffing and mutating the data
function updateData(selectedNode) {
  var neighbors = getNeighbors(selectedNode)
  var newNodes = baseNodes.filter(function (node) {
    return neighbors.indexOf(node.id) > -1 || node.level === 1
  })
  var diff = {
    removed: nodes.filter(function (node) { return newNodes.indexOf(node) === -1 }),
    added: newNodes.filter(function (node) { return nodes.indexOf(node) === -1 })
  }


  diff.removed.forEach(function (node) { 
	nodes.splice(nodes.indexOf(node), 1) 
  })
  diff.added.forEach(function (node) { 
	nodes.push(node) 
  })



links = baseLinks.filter(function (link) {
    return link.target.id === selectedNode.id || link.source.id === selectedNode.id
  
})


newLinks = [];
for (y in links)
 {
  for (x in baseLinks)
    {

	if(links[y].source.id === baseLinks[x].source.id){
		newLinks.push (baseLinks[x])
	}
	else if(links[y].source.id === baseLinks[x].target.id){
		newLinks.push (baseLinks[x])
	}
	else if(links[y].target.id === baseLinks[x].source.id){
		newLinks.push (baseLinks[x])
	}
	else if(links[y].target.id === baseLinks[x].target.id){
		newLinks.push (baseLinks[x])
	}
    }
 }

links = newLinks;
};




//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
function updateGraph() {
  // links
  linkElements = linkGroup.selectAll('line')
    .data(links, function (link) {
      return link.target.id + link.source.id
    })
  linkElements.exit().remove()
  var linkEnter = linkElements
    .enter().append('line')
    .attr('stroke-width', 2)
    .attr('stroke', 'rgba(150, 150, 150, 0.6)')
  linkElements = linkEnter.merge(linkElements)
  // nodes
  nodeElements = nodeGroup.selectAll('circle')
    .data(nodes, function (node) { return node.id })
  nodeElements.exit().remove()
  var nodeEnter = nodeElements
    .enter()
    .append('circle')
	//Node size - targets level 0 objects
    .attr('r', function(node) {
	if (node.radius === 25) {
	  return '35'
	}
	else if (node.radius === 15) {
	  return '23'
	}
	else if (node.radius === 12) {
	  return '18'
	}
	else {
	  return '9'
	}
	})

	//Starting Color - is cancelled out by neighborColor
    .attr('fill', function (node) { 
	if (node.radius === 12) {
	  return 'rgba(0, 153, 255,1.0)'//SPECIFIC TO DEGREE NODES
	}
	else if (node.group === 0) {
	  return 'rgba(255,0,0,1.0)'//'red'
	}
	else if (node.group === 1) {
	  return 'rgba(51,51,255,1.0)'//'blue'
	}
	else if (node.group === 2) {
	  return 'rgba(255,153,51,1.0)'//'orange'
	}
	else if (node.group === 3) {
	  return 'rgba(153,0,153,1.0)'//'purple'
	}
	else if (node.group === 4) {
	  return 'rgba(0,0,153,1.0)'//'MidnightBlue'
	}
	else if (node.group === 5) {
	  return 'rgba(0,204,153,1.0)'//'LightGreen'
	}
	else if (node.group === 6) {
	  return 'rgba(255,102,255,1.0)'//'RebeccaPurple'
	}
	else if (node.group === 7) {
	  return 'rgba(204,0,102,1.0)'//SPECIFIC TO UK DEGREE NODE
	}
	else {
	  return 'rgba(102,153,153,1.0)'//'void'
	}
	})

    .call(dragDrop)
    // we link the selectNode method here
    // to update the graph on every click


     .on('click', selectNode)
     nodeElements = nodeEnter.merge(nodeElements)

  // texts
  textElements = textGroup.selectAll('text')
    .data(nodes, function (node) { return node.id })
  textElements.exit().remove()
  var textEnter = textElements
    .enter()
    .append('text')
    .text(function (node) { return node.label })
	//Text size
    .attr('font-size',function(node) {
	if (node.radius === 25) {
	  return '30'
	}
	else if (node.radius === 15) {
	  return '20'
	}
	else if (node.radius === 12) {
	  return '15'
	}
	else {
	  return '9'
	}
	})
	
	
	
    .attr('dx', 15)
    .attr('dy', 4)
  textElements = textEnter.merge(textElements)
}


function updateSimulation() {
  updateGraph()
  simulation.nodes(nodes).on('tick', () => {
    nodeElements
      .attr('cx', function (node) { return node.x  })//= Math.max(radius, Math.min(width-radius, node.x));
      .attr('cy', function (node) { return node.y })//= Math.max(radius, Math.min(height-radius, node.y));
    textElements
      .attr('x', function (node) { return node.x })
      .attr('y', function (node) { return node.y })
    linkElements
      .attr('x1', function (link) { return link.source.x })
      .attr('y1', function (link) { return link.source.y })
      .attr('x2', function (link) { return link.target.x })
      .attr('y2', function (link) { return link.target.y })
  })
  simulation.force('link').links(links)
  simulation.alphaTarget(0.7).restart()
}


//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

//Search Array, creates the drop down list
var optArray = [];
for (i in baseNodes) {
    optArray.push(baseNodes[i].id);
	}
  optArray = optArray.sort();

var highlight_trans = 0.1;


//Search function
$(function () {
    $("#search").autocomplete({
        source: optArray
    });
});


function searchNode() {
    //find the node
    var selectedVal = document.getElementById('search').value;
	console.log("We are searching for "+selectedVal)

	for (i in baseNodes){
	  if (selectedVal === baseNodes[i].id){
	     console.log("Match")
		resetData()
		updateData(baseNodes[i])
		updateSimulation()

	var neighbors = getNeighbors(baseNodes[i])
  	nodeElements.attr('fill', function (node) { return getNodeColor(node, neighbors) })
 	textElements.attr('fill', function (node) { return getTextColor(node, neighbors) })

	  }	  
	} 

};






//----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// last but not least, we call updateSimulation
// to trigger the initial render
updateSimulation()
</script>

</body>
</html>
